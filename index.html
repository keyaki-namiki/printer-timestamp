<!DOCTYPE html>
<!--
//
// Star webPRNT Sample(API Receipt)
//
// Version 1.2.1
//
// Copyright (C) 2012-2016 STAR MICRONICS CO., LTD. All Rights Reserved.
//
-->
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="Expires" content="86400">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>Star webPRNT Sample(API Receipt)</title>

<link href="css/import.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="style.css" media="screen">

<link href="css/style_apireceipt.css" rel="stylesheet" type="text/css">
<script type='text/javascript' src='js/StarWebPrintBuilder.js'></script>
<script type='text/javascript' src='js/StarWebPrintTrader.js'></script>
<script type='text/javascript' src='js/StarBarcodeEncoder.js'></script>
<script type='text/javascript'>
<!--
function encodeEscapeSequence(data) {
    var regexp = /\\[tnr\\]/g;

    if (regexp.test(data)) {
        data = data.replace(regexp, function (match) {
            switch (match) {
                case '\\t' : return '\\x09';
                case '\\n' : return '\\x0a';
                case '\\r' : return '\\x0d';
            }

            return '\\x5c';
        });
    }

    var regexp = /\\[Xx][0-9A-Fa-f]{2}/g;

    if (regexp.test(data)) {
        data = data.replace(regexp, function (match) {
            return String.fromCharCode(parseInt(match.slice(2), 16));
        });
    }

    return data;
}

function onChangeSymbology() {
    switch (document.getElementById('symbology').value) {
        default          :     // 'UPC-E'
//      case 'UPC-A'     :
//      case 'JAN/EAN8'  :
//      case 'JAN/EAN13' :
//      case 'Code128'   :
//      case 'Code93'    :
            document.getElementById('modulebox0').style.display="inline";
            document.getElementById('modulebox1').style.display="none";
            document.getElementById('modulebox2').style.display="none";
            break;
        case 'Code39' :
        case 'NW-7'   :
            document.getElementById('modulebox0').style.display="none";
            document.getElementById('modulebox1').style.display="inline";
            document.getElementById('modulebox2').style.display="none";
            break;
        case 'ITF' :
            document.getElementById('modulebox0').style.display="none";
            document.getElementById('modulebox1').style.display="none";
            document.getElementById('modulebox2').style.display="inline";
            break;
    }
}

function onExampleData() {
    switch (document.getElementById('symbology').value) {
        default          : document.getElementById('data').value = '01234500006';  break;     // 'UPC-E'
        case 'UPC-A'     : document.getElementById('data').value = '01234567890';  break;
        case 'JAN/EAN8'  : document.getElementById('data').value = '0123456';      break;
        case 'JAN/EAN13' : document.getElementById('data').value = '012345678901'; break;
        case 'Code39'    : document.getElementById('data').value = '0123456789';   break;
        case 'ITF'       : document.getElementById('data').value = '0123456789';   break;
        case 'Code128'   : document.getElementById('data').value = '{B0123456789'; break;
        case 'Code93'    : document.getElementById('data').value = '0123456789';   break;
        case 'NW-7'      : document.getElementById('data').value = 'A0123456789B'; break;
    }
}

function onDrawBarcode() {
    var canvas = document.getElementById('canvasPaper');

    if (canvas.getContext) {
        var context = canvas.getContext('2d');

        try {
            var x = parseInt(document.getElementById('positionX').value);
            var y = parseInt(document.getElementById('positionY').value);

            var moduleSize       = 0;
            var narrowModuleSize = 0;
            var wideModuleSize   = 0;

            switch (document.getElementById('symbology').value) {
                default          :     // 'UPC-E'
//              case 'UPC-A'     :
//              case 'JAN/EAN8'  :
//              case 'JAN/EAN13' :
//              case 'Code128'   :
//              case 'Code93'    :
                    var module = document.getElementById('module0').value;

                    moduleSize = parseInt(module);
                    break;
                case 'Code39' :
                case 'NW-7'   :
                    var module = document.getElementById('module1').value;

                    narrowModuleSize = parseInt(module.split(':')[0]);
                    wideModuleSize   = parseInt(module.split(':')[1]);
                    break;
                case 'ITF' :
                    var module = document.getElementById('module2').value;

                    narrowModuleSize = parseInt(module.split(':')[0]);
                    wideModuleSize   = parseInt(module.split(':')[1]);
                    break;
            }

            var height = parseInt(document.getElementById('height').value);

            var encoder = new StarBarcodeEncoder();

            var lineImage = '';

            var data = encodeEscapeSequence(document.getElementById('data').value);

            switch (document.getElementById('symbology').value) {
                default          : lineImage = encoder.createUPCE   ({data:data}); break;     // 'UPC-E'
                case 'UPC-A'     : lineImage = encoder.createUPCA   ({data:data}); break;
                case 'JAN/EAN8'  : lineImage = encoder.createJAN8   ({data:data}); break;
                case 'JAN/EAN13' : lineImage = encoder.createJAN13  ({data:data}); break;
                case 'Code39'    : lineImage = encoder.createCode39 ({data:data}); break;
                case 'ITF'       : lineImage = encoder.createITF    ({data:data}); break;
                case 'Code128'   : lineImage = encoder.createCode128({data:data}); break;
                case 'Code93'    : lineImage = encoder.createCode93 ({data:data}); break;
                case 'NW-7'      : lineImage = encoder.createNW7    ({data:data}); break;
            }

            var pos = x;

            for (var i = 0; i < lineImage.length; i++) {
                if (lineImage.charAt(i).match(/[1WN]/g)) {
                    context.fillStyle = '#000000';
                }

                switch (lineImage.charAt(i)) {
                    case '1' :
                        context.fillRect(pos, y, moduleSize, height);
//                      break;     // through!!!
                    case '0' :
                        pos += moduleSize;
                        break;
                    case 'N' :
                        context.fillRect(pos, y, narrowModuleSize, height);
//                      break;     // through!!!
                    case 'n' :
                        pos += narrowModuleSize;
                        break;
                    case 'W' :
                        context.fillRect(pos, y, wideModuleSize, height);
//                      break;     // through!!!
                    case 'w' :
                        pos += wideModuleSize;
                        break;
                }
            }

            document.getElementById('positionY').value = y + height + 16;
//          document.getElementById('positionY').value = y + height;
        }
        catch (e) {
            alert(e.message);
        }
    }
}

function onResizeCanvas() {
    var canvas = document.getElementById('canvasPaper');

    if (canvas.getContext) {
        var context = canvas.getContext('2d');

        switch (document.getElementById('paperWidth').value) {
            case 'inch2' :
                canvas.width = 384;
                canvas.height = 213;
                break;
            case 'inch3DotImpact' :
                canvas.width = 576;
                canvas.height = 320;
                break;
            default :
                canvas.width = 576;
                canvas.height = 320;
                break;
            case 'inch4' :
                canvas.width = 832;
                canvas.height = 476;
                break;
        }
        document.getElementById('canvasPaper').style.width="700px";
        onClearCanvas();
    }
}

function onClearCanvas() {
    var canvas = document.getElementById('canvasPaper');

    if (canvas.getContext) {
        var context = canvas.getContext('2d');

        context.clearRect(0, 0, canvas.width, canvas.height);

        document.getElementById('positionX').value = 0;
        document.getElementById('positionY').value = 0;
    }
}

function onSendMessage() {
	showNowPrinting();
    var url              = document.getElementById('url').value;
    var papertype        = document.getElementById('papertype').value;

    var trader = new StarWebPrintTrader({url:url, papertype:papertype});

    trader.onReceive = function (response) {
        hideNowPrinting();

        var msg = '- onReceive -\n\n';

        msg += 'TraderSuccess : [ ' + response.traderSuccess + ' ]\n';

//      msg += 'TraderCode : [ ' + response.traderCode + ' ]\n';

        msg += 'TraderStatus : [ ' + response.traderStatus + ',\n';

        if (trader.isCoverOpen            ({traderStatus:response.traderStatus})) {msg += '\tCoverOpen,\n';}
        if (trader.isOffLine              ({traderStatus:response.traderStatus})) {msg += '\tOffLine,\n';}
        if (trader.isCompulsionSwitchClose({traderStatus:response.traderStatus})) {msg += '\tCompulsionSwitchClose,\n';}
        if (trader.isEtbCommandExecute    ({traderStatus:response.traderStatus})) {msg += '\tEtbCommandExecute,\n';}
        if (trader.isHighTemperatureStop  ({traderStatus:response.traderStatus})) {msg += '\tHighTemperatureStop,\n';}
        if (trader.isNonRecoverableError  ({traderStatus:response.traderStatus})) {msg += '\tNonRecoverableError,\n';}
        if (trader.isAutoCutterError      ({traderStatus:response.traderStatus})) {msg += '\tAutoCutterError,\n';}
        if (trader.isBlackMarkError       ({traderStatus:response.traderStatus})) {msg += '\tBlackMarkError,\n';}
        if (trader.isPaperEnd             ({traderStatus:response.traderStatus})) {msg += '\tPaperEnd,\n';}
        if (trader.isPaperNearEnd         ({traderStatus:response.traderStatus})) {msg += '\tPaperNearEnd,\n';}

        msg += '\tEtbCounter = ' + trader.extractionEtbCounter({traderStatus:response.traderStatus}).toString() + ' ]\n';

//      msg += 'Status : [ ' + response.status + ' ]\n';
//
//      msg += 'ResponseText : [ ' + response.responseText + ' ]\n';

        alert(msg);
    }

    trader.onError = function (response) {
        var msg = '- onError -\n\n';

        msg += '\tStatus:' + response.status + '\n';

        msg += '\tResponseText:' + response.responseText + '\n\n';

        msg += 'Do you want to retry?\n';

        var answer = confirm(msg);

        if (answer) {
            onSendMessage();
        }
        else {
            hideNowPrinting();
        }
    }

    try {
        var canvas = document.getElementById('canvasPaper');

        if (canvas.getContext) {
            var context = canvas.getContext('2d');

            var builder = new StarWebPrintBuilder();

            var request = '';

            request += builder.createInitializationElement();

            request += builder.createBitImageElement({context:context, x:0, y:0, width:canvas.width, height:canvas.height});

            request += builder.createCutPaperElement({feed:true});

            trader.sendMessage({request:request});
        }
    }
    catch (e) {
        hideNowPrinting();

        alert(e.message);
    }
}
function nowLoading(){
	document.getElementById('form').style.display="block";
	document.getElementById('overlay').style.display="none";
	document.getElementById('nowLoadingWrapper').style.display="none";
}
function showNowPrinting(){
    document.getElementById('overlay').style.display="block";
    document.getElementById('nowPrintingWrapper').style.display="table";
}
function hideNowPrinting(){
    document.getElementById('overlay').style.opacity= 0.0;
    document.getElementById('overlay').style.transition= "all 0.3s";
    intimer = setTimeout(function (){
        document.getElementById('overlay').style.display="none";
    document.getElementById('overlay').style.opacity= 1;
        clearTimeout(intimer);
    }, 300);
    document.getElementById('nowPrintingWrapper').style.display="none";
}
window.onload = function() {
	nowLoading();
	onResizeCanvas();
}
var request = '';

function sendMessage(request) {
    showNowPrinting();
    var url              = document.getElementById('url').value;
    var papertype        = document.getElementById('papertype').value;

    var trader = new StarWebPrintTrader({url:url, papertype:papertype});

    trader.onReceive = function (response) {
        hideNowPrinting();

        var msg = '- onReceive -\n\n';

        msg += 'TraderSuccess : [ ' + response.traderSuccess + ' ]\n';

//      msg += 'TraderCode : [ ' + response.traderCode + ' ]\n';

        msg += 'TraderStatus : [ ' + response.traderStatus + ',\n';

        if (trader.isCoverOpen            ({traderStatus:response.traderStatus})) {msg += '\tCoverOpen,\n';}
        if (trader.isOffLine              ({traderStatus:response.traderStatus})) {msg += '\tOffLine,\n';}
        if (trader.isCompulsionSwitchClose({traderStatus:response.traderStatus})) {msg += '\tCompulsionSwitchClose,\n';}
        if (trader.isEtbCommandExecute    ({traderStatus:response.traderStatus})) {msg += '\tEtbCommandExecute,\n';}
        if (trader.isHighTemperatureStop  ({traderStatus:response.traderStatus})) {msg += '\tHighTemperatureStop,\n';}
        if (trader.isNonRecoverableError  ({traderStatus:response.traderStatus})) {msg += '\tNonRecoverableError,\n';}
        if (trader.isAutoCutterError      ({traderStatus:response.traderStatus})) {msg += '\tAutoCutterError,\n';}
        if (trader.isBlackMarkError       ({traderStatus:response.traderStatus})) {msg += '\tBlackMarkError,\n';}
        if (trader.isPaperEnd             ({traderStatus:response.traderStatus})) {msg += '\tPaperEnd,\n';}
        if (trader.isPaperNearEnd         ({traderStatus:response.traderStatus})) {msg += '\tPaperNearEnd,\n';}

        msg += '\tEtbCounter = ' + trader.extractionEtbCounter({traderStatus:response.traderStatus}).toString() + ' ]\n';

//      msg += 'Status : [ ' + response.status + ' ]\n';
//
//      msg += 'ResponseText : [ ' + response.responseText + ' ]\n';

        alert(msg);
    }

    trader.onError = function (response) {
        var msg = '- onError -\n\n';

        msg += '\tStatus:' + response.status + '\n';

        msg += '\tResponseText:' + response.responseText + '\n\n';

        msg += 'Do you want to retry?\n';

        var answer = confirm(msg);

        if (answer) {
            sendMessage(request);
        }
        else {
            hideNowPrinting();
        }
    }

    trader.sendMessage({request:request});
}

//  function onSendAscii() {
//      var builder = new StarWebPrintBuilder();
//  
//      request = '';
//  
//      request += builder.createInitializationElement();
//  
//      switch (document.getElementById('paperWidth').value) {
//          case 'inch2' :
//              request += builder.createTextElement({characterspace:2});
//  
//              request += builder.createAlignmentElement({position:'right'});
//  //            request += builder.createLogoElement({number:1});
//              request += builder.createTextElement({data:'TEL 9999-99-9999\n'});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createAlignmentElement({position:'center'});
//              request += builder.createTextElement({data:'Thank you for your coming. \n'});
//              request += builder.createTextElement({data:"We hope you'll visit again.\n"});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'Apple                $20.00\n'});
//              request += builder.createTextElement({data:'Banana               $30.00\n'});
//              request += builder.createTextElement({data:'Grape                $40.00\n'});
//              request += builder.createTextElement({data:'Lemon                $50.00\n'});
//              request += builder.createTextElement({data:'Orange               $60.00\n'});
//              request += builder.createTextElement({emphasis:true, data:'Subtotal            $200.00\n'});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({underline:true, data:'Tax                  $10.00\n'});
//              request += builder.createTextElement({underline:false});
//  
//              request += builder.createTextElement({emphasis:true});
//              request += builder.createTextElement({width:2, data:'Total'});
//              request += builder.createTextElement({width:1, data:'   '});
//              request += builder.createTextElement({width:2, data:'$210.00\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({emphasis:false});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'Received            $300.00\n'});
//  
//              request += builder.createTextElement({width:2, data:'Change'});
//              request += builder.createTextElement({width:1, data:'   '});
//              request += builder.createTextElement({width:2, data:'$90.00\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({characterspace:0});
//              break;
//          case 'inch3DotImpact' :
//              request += builder.createTextElement({characterspace:2});
//  
//              request += builder.createAlignmentElement({position:'right'});
//  //            request += builder.createLogoElement({number:1});
//              request += builder.createTextElement({data:'TEL 9999-99-9999\n'});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createAlignmentElement({position:'center'});
//              request += builder.createTextElement({data:'Thank you for your coming. \n'});
//              request += builder.createTextElement({data:"We hope you'll visit again.\n"});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'Apple                               $20.00\n'});
//              request += builder.createTextElement({data:'Banana                              $30.00\n'});
//              request += builder.createTextElement({data:'Grape                               $40.00\n'});
//              request += builder.createTextElement({data:'Lemon                               $50.00\n'});
//              request += builder.createTextElement({data:'Orange                              $60.00\n'});
//              request += builder.createTextElement({emphasis:true, data:'Subtotal                           $200.00\n'});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({underline:true, data:'Tax                                 $10.00\n'});
//              request += builder.createTextElement({underline:false});
//  
//              request += builder.createTextElement({emphasis:true});
//              request += builder.createTextElement({width:2, data:'Total         $210.00\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({emphasis:false});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'Received                           $300.00\n'});
//  
//              request += builder.createTextElement({width:2, data:'Change         $90.00\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({characterspace:0});
//              break;
//          default :
//              request += builder.createTextElement({characterspace:0});
//  
//              request += builder.createAlignmentElement({position:'right'});
//  //            request += builder.createLogoElement({number:1});
//              request += builder.createTextElement({data:'TEL 9999-99-9999\n'});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createAlignmentElement({position:'center'});
//              request += builder.createTextElement({data:'Thank you for your coming. \n'});
//              request += builder.createTextElement({data:"We hope you'll visit again.\n"});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'Apple                                     $20.00\n'});
//              request += builder.createTextElement({data:'Banana                                    $30.00\n'});
//              request += builder.createTextElement({data:'Grape                                     $40.00\n'});
//              request += builder.createTextElement({data:'Lemon                                     $50.00\n'});
//              request += builder.createTextElement({data:'Orange                                    $60.00\n'});
//              request += builder.createTextElement({emphasis:true, data:'Subtotal                                 $200.00\n'});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({underline:true, data:'Tax                                       $10.00\n'});
//              request += builder.createTextElement({underline:false});
//  
//              request += builder.createTextElement({emphasis:true});
//              request += builder.createTextElement({width:2, data:'Total            $210.00\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({emphasis:false});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'Received                                 $300.00\n'});
//  
//              request += builder.createTextElement({width:2, data:'Change            $90.00\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({characterspace:0});
//              break;
//          case 'inch4' :
//              request += builder.createTextElement({characterspace:1});
//  
//              request += builder.createAlignmentElement({position:'right'});
//  //            request += builder.createLogoElement({number:1});
//              request += builder.createTextElement({data:'TEL 9999-99-9999\n'});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createAlignmentElement({position:'center'});
//              request += builder.createTextElement({data:'Thank you for your coming. \n'});
//              request += builder.createTextElement({data:"We hope you'll visit again.\n"});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'Apple                                                     $20.00\n'});
//              request += builder.createTextElement({data:'Banana                                                    $30.00\n'});
//              request += builder.createTextElement({data:'Grape                                                     $40.00\n'});
//              request += builder.createTextElement({data:'Lemon                                                     $50.00\n'});
//              request += builder.createTextElement({data:'Orange                                                    $60.00\n'});
//              request += builder.createTextElement({emphasis:true, data:'Subtotal                                                 $200.00\n'});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({underline:true, data:'Tax                                                       $10.00\n'});
//              request += builder.createTextElement({underline:false});
//  
//              request += builder.createTextElement({emphasis:true});
//              request += builder.createTextElement({width:2, data:'Total                    $210.00\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({emphasis:false});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'Received                                                 $300.00\n'});
//  
//              request += builder.createTextElement({width:2, data:'Change                    $90.00\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({characterspace:0});
//              break;
//      }
//  
//      request += builder.createCutPaperElement({feed:true});
//  
//      sendMessage(request);
//  }
//  
//  function onSendKanji() {
//  	showNowPrinting();
//  
//      var builder = new StarWebPrintBuilder();
//  
//      request = '';
//  
//      request += builder.createInitializationElement();
//  
//      var encoding = document.getElementById('encoding').value;
//  
//      // If you Send to printer that is not supported UTF8, DO NOT set codepage='utf8'.
//      // UTF8に対応していないプリンタへ、漢字を送信する場合は、
//      // codepage='utf8'を指定しないこと。
//      // 正しく印刷できない場合がある。
//      request += builder.createTextElement({codepage:encoding});
//  
//      switch (document.getElementById('paperWidth').value) {
//          case 'inch2' :
//              request += builder.createTextElement({characterspace:0, international:'japan'});
//  
//              request += builder.createAlignmentElement({position:'right'});
//  //            request += builder.createLogoElement({number:1});
//              request += builder.createTextElement({data:'TEL 9999-99-9999\n'});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              //request += builder.createAlignmentElement({position:'center'});
//              request += builder.createTextElement({data:'お買い上げありがとうございます。またのご来店を、お待ちしております。\n'});
//              request += builder.createTextElement({data:'数量予約も承っております。お気軽にご連絡ください。\n'});
//              //request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'りんご                    \\2,000\n'});
//              request += builder.createTextElement({data:'バナナ                    \\3,000\n'});
//              request += builder.createTextElement({data:'ぶどう                    \\4,000\n'});
//              request += builder.createTextElement({data:'レモン                    \\5,000\n'});
//              request += builder.createTextElement({data:'みかん                    \\6,000\n'});
//              request += builder.createTextElement({emphasis:true, data:'小計                     \\20,000\n'});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({underline:true, data:'消費税                    \\1,000\n'});
//              request += builder.createTextElement({underline:false});
//  
//              request += builder.createTextElement({emphasis:true});
//              request += builder.createTextElement({width:2, data:'合計     \\21,000\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({emphasis:false});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'お預かり                 \\30,000\n'});
//  
//              request += builder.createTextElement({width:2, data:'お釣り    \\9,000\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({characterspace:0});
//              break;
//          case 'inch3DotImpact' :
//              request += builder.createTextElement({characterspace:2, international:'japan'});
//  
//              request += builder.createAlignmentElement({position:'right'});
//  //            request += builder.createLogoElement({number:1});
//              request += builder.createTextElement({data:'TEL 9999-99-9999\n'});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createAlignmentElement({position:'center'});
//              request += builder.createTextElement({data:'お買い上げありがとうございました。\n'});
//              request += builder.createTextElement({data:'またのご来店をお待ちしております。\n'});
//              request += builder.createTextElement({data:'数量予約も承っております。\n'});
//              request += builder.createTextElement({data:'お気軽にご連絡ください。\n'});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'りんご                              \\2,000\n'});
//              request += builder.createTextElement({data:'バナナ                              \\3,000\n'});
//              request += builder.createTextElement({data:'ぶどう                              \\4,000\n'});
//              request += builder.createTextElement({data:'レモン                              \\5,000\n'});
//              request += builder.createTextElement({data:'みかん                              \\6,000\n'});
//              request += builder.createTextElement({emphasis:true, data:'小計                               \\20,000\n'});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({underline:true, data:'消費税                              \\1,000\n'});
//              request += builder.createTextElement({underline:false});
//  
//              request += builder.createTextElement({emphasis:true});
//              request += builder.createTextElement({width:2, data:'合計          \\21,000\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({emphasis:false});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'お預かり                           \\30,000\n'});
//  
//              request += builder.createTextElement({width:2, data:'お釣り         \\9,000\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({characterspace:0});
//              break;
//          default :
//              request += builder.createTextElement({characterspace:0, international:'japan'});
//  
//              request += builder.createAlignmentElement({position:'right'});
//  //            request += builder.createLogoElement({number:1});
//              request += builder.createTextElement({data:'TEL 9999-99-9999\n'});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createAlignmentElement({position:'center'});
//              request += builder.createTextElement({data:'お買い上げありがとうございました。\n'});
//              request += builder.createTextElement({data:'またのご来店をお待ちしております。\n'});
//              request += builder.createTextElement({data:'数量予約も承っております。\n'});
//              request += builder.createTextElement({data:'お気軽にご連絡ください。\n'});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'りんご                                    \\2,000\n'});
//              request += builder.createTextElement({data:'バナナ                                    \\3,000\n'});
//              request += builder.createTextElement({data:'ぶどう                                    \\4,000\n'});
//              request += builder.createTextElement({data:'レモン                                    \\5,000\n'});
//              request += builder.createTextElement({data:'みかん                                    \\6,000\n'});
//              request += builder.createTextElement({emphasis:true, data:'小計                                     \\20,000\n'});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({underline:true, data:'消費税                                    \\1,000\n'});
//              request += builder.createTextElement({underline:false});
//  
//              request += builder.createTextElement({emphasis:true});
//              request += builder.createTextElement({width:2, data:'合計             \\21,000\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({emphasis:false});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'お預かり                                 \\30,000\n'});
//  
//              request += builder.createTextElement({width:2, data:'お釣り            \\9,000\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({characterspace:0});
//              break;
//          case 'inch4' :
//              request += builder.createTextElement({characterspace:1, international:'japan'});
//  
//              request += builder.createAlignmentElement({position:'right'});
//  //            request += builder.createLogoElement({number:1});
//              request += builder.createTextElement({data:'TEL 9999-99-9999\n'});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createAlignmentElement({position:'center'});
//              request += builder.createTextElement({data:'お買い上げありがとうございました。\n'});
//              request += builder.createTextElement({data:'またのご来店をお待ちしております。\n'});
//              request += builder.createTextElement({data:'数量予約も承っております。\n'});
//              request += builder.createTextElement({data:'お気軽にご連絡ください。\n'});
//              request += builder.createAlignmentElement({position:'left'});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'りんご                                                    \\2,000\n'});
//              request += builder.createTextElement({data:'バナナ                                                    \\3,000\n'});
//              request += builder.createTextElement({data:'ぶどう                                                    \\4,000\n'});
//              request += builder.createTextElement({data:'レモン                                                    \\5,000\n'});
//              request += builder.createTextElement({data:'みかん                                                    \\6,000\n'});
//              request += builder.createTextElement({emphasis:true, data:'小計                                                     \\20,000\n'});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({underline:true, data:'消費税                                                    \\1,000\n'});
//              request += builder.createTextElement({underline:false});
//  
//              request += builder.createTextElement({emphasis:true});
//              request += builder.createTextElement({width:2, data:'合計                     \\21,000\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({emphasis:false});
//  
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({data:'お預かり                                                 \\30,000\n'});
//  
//              request += builder.createTextElement({width:2, data:'お釣り                    \\9,000\n'});
//              request += builder.createTextElement({width:1});
//              request += builder.createTextElement({data:'\n'});
//  
//              request += builder.createTextElement({characterspace:0});
//              break;
//      }
//  
//      request += builder.createCutPaperElement({feed:true});
//  
//      sendMessage(request);
//  }


function PrintFabSpace(){
    
	showNowPrinting();

var builder = new StarWebPrintBuilder();

request = '';

request += builder.createInitializationElement();

var encoding = document.getElementById('encoding').value;

// If you Send to printer that is not supported UTF8, DO NOT set codepage='utf8'.
// UTF8に対応していないプリンタへ、漢字を送信する場合は、
// codepage='utf8'を指定しないこと。
// 正しく印刷できない場合がある。
request += builder.createTextElement({codepage:encoding});

switch (document.getElementById('paperWidth').value) {
    case 'inch2' :
        request += builder.createTextElement({characterspace:0, international:'japan'});

        request += builder.createTextElement({data:'\n'});
        request += builder.createTextElement({data:'\n'});
        request += builder.createAlignmentElement({position:'right'});
        request += builder.createLogoElement({number:1});
        request += builder.createTextElement({data:'TEL 9999-99-9999\n'});
        request += builder.createAlignmentElement({position:'left'});

        request += builder.createTextElement({data:'\n'});

        //request += builder.createAlignmentElement({position:'center'});
        request += builder.createTextElement({data:'お買い上げありがとうございます。またのご来店を、お待ちしております。\n'});
        request += builder.createTextElement({data:'数量予約も承っております。お気軽にご連絡ください。\n'});
        //request += builder.createAlignmentElement({position:'left'});

        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({data:'りんご                    \\2,000\n'});
        request += builder.createTextElement({data:'バナナ                    \\3,000\n'});
        request += builder.createTextElement({data:'ぶどう                    \\4,000\n'});
        request += builder.createTextElement({data:'レモン                    \\5,000\n'});
        request += builder.createTextElement({data:'みかん                    \\6,000\n'});
        request += builder.createTextElement({emphasis:true, data:'小計                     \\20,000\n'});
        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({underline:true, data:'消費税                    \\1,000\n'});
        request += builder.createTextElement({underline:false});

        request += builder.createTextElement({emphasis:true});
        request += builder.createTextElement({width:2, data:'合計     \\21,000\n'});
        request += builder.createTextElement({width:1});
        request += builder.createTextElement({emphasis:false});

        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({data:'お預かり                 \\30,000\n'});

        request += builder.createTextElement({width:2, data:'お釣り    \\9,000\n'});
        request += builder.createTextElement({width:1});
        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({characterspace:0});
        break;
    case 'inch3DotImpact' :
        request += builder.createTextElement({characterspace:2, international:'japan'});

        request += builder.createAlignmentElement({position:'right'});
        request += builder.createLogoElement({number:1});
        request += builder.createTextElement({data:'TEL 9999-99-9999\n'});
        request += builder.createAlignmentElement({position:'left'});

        request += builder.createTextElement({data:'\n'});

        request += builder.createAlignmentElement({position:'center'});
        request += builder.createTextElement({data:'お買い上げありがとうございました。\n'});
        request += builder.createTextElement({data:'またのご来店をお待ちしております。\n'});
        request += builder.createTextElement({data:'数量予約も承っております。\n'});
        request += builder.createTextElement({data:'お気軽にご連絡ください。\n'});
        request += builder.createAlignmentElement({position:'left'});

        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({data:'りんご                              \\2,000\n'});
        request += builder.createTextElement({data:'バナナ                              \\3,000\n'});
        request += builder.createTextElement({data:'ぶどう                              \\4,000\n'});
        request += builder.createTextElement({data:'レモン                              \\5,000\n'});
        request += builder.createTextElement({data:'みかん                              \\6,000\n'});
        request += builder.createTextElement({emphasis:true, data:'小計                               \\20,000\n'});
        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({underline:true, data:'消費税                              \\1,000\n'});
        request += builder.createTextElement({underline:false});

        request += builder.createTextElement({emphasis:true});
        request += builder.createTextElement({width:2, data:'合計          \\21,000\n'});
        request += builder.createTextElement({width:1});
        request += builder.createTextElement({emphasis:false});

        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({data:'お預かり                           \\30,000\n'});

        request += builder.createTextElement({width:2, data:'お釣り         \\9,000\n'});
        request += builder.createTextElement({width:1});
        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({characterspace:0});
        break;
    default :
        request += builder.createTextElement({characterspace:0, international:'japan'});

        request += builder.createAlignmentElement({position:'right'});
        request += builder.createLogoElement({number:1});
        request += builder.createTextElement({data:'TEL 9999-99-9999\n'});
        request += builder.createAlignmentElement({position:'left'});

        request += builder.createTextElement({data:'\n'});

        request += builder.createAlignmentElement({position:'center'});
        request += builder.createTextElement({data:'お買い上げありがとうございました。\n'});
        request += builder.createTextElement({data:'またのご来店をお待ちしております。\n'});
        request += builder.createTextElement({data:'数量予約も承っております。\n'});
        request += builder.createTextElement({data:'お気軽にご連絡ください。\n'});
        request += builder.createAlignmentElement({position:'left'});

        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({data:'りんご                                    \\2,000\n'});
        request += builder.createTextElement({data:'バナナ                                    \\3,000\n'});
        request += builder.createTextElement({data:'ぶどう                                    \\4,000\n'});
        request += builder.createTextElement({data:'レモン                                    \\5,000\n'});
        request += builder.createTextElement({data:'みかん                                    \\6,000\n'});
        request += builder.createTextElement({emphasis:true, data:'小計                                     \\20,000\n'});
        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({underline:true, data:'消費税                                    \\1,000\n'});
        request += builder.createTextElement({underline:false});

        request += builder.createTextElement({emphasis:true});
        request += builder.createTextElement({width:2, data:'合計             \\21,000\n'});
        request += builder.createTextElement({width:1});
        request += builder.createTextElement({emphasis:false});

        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({data:'お預かり                                 \\30,000\n'});

        request += builder.createTextElement({width:2, data:'お釣り            \\9,000\n'});
        request += builder.createTextElement({width:1});
        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({characterspace:0});
        break;
    case 'inch4' :
        request += builder.createTextElement({characterspace:1, international:'japan'});

        request += builder.createAlignmentElement({position:'right'});
        request += builder.createLogoElement({number:1});
        request += builder.createTextElement({data:'TEL 9999-99-9999\n'});
        request += builder.createAlignmentElement({position:'left'});

        request += builder.createTextElement({data:'\n'});

        request += builder.createAlignmentElement({position:'center'});
        request += builder.createTextElement({data:'お買い上げありがとうございました。\n'});
        request += builder.createTextElement({data:'またのご来店をお待ちしております。\n'});
        request += builder.createTextElement({data:'数量予約も承っております。\n'});
        request += builder.createTextElement({data:'お気軽にご連絡ください。\n'});
        request += builder.createAlignmentElement({position:'left'});

        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({data:'りんご                                                    \\2,000\n'});
        request += builder.createTextElement({data:'バナナ                                                    \\3,000\n'});
        request += builder.createTextElement({data:'ぶどう                                                    \\4,000\n'});
        request += builder.createTextElement({data:'レモン                                                    \\5,000\n'});
        request += builder.createTextElement({data:'みかん                                                    \\6,000\n'});
        request += builder.createTextElement({emphasis:true, data:'小計                                                     \\20,000\n'});
        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({underline:true, data:'消費税                                                    \\1,000\n'});
        request += builder.createTextElement({underline:false});

        request += builder.createTextElement({emphasis:true});
        request += builder.createTextElement({width:2, data:'合計                     \\21,000\n'});
        request += builder.createTextElement({width:1});
        request += builder.createTextElement({emphasis:false});

        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({data:'お預かり                                                 \\30,000\n'});

        request += builder.createTextElement({width:2, data:'お釣り                    \\9,000\n'});
        request += builder.createTextElement({width:1});
        request += builder.createTextElement({data:'\n'});

        request += builder.createTextElement({characterspace:0});
        break;
    }

request += builder.createCutPaperElement({feed:true});

sendMessage(request);
}
function nowLoading(){
	document.getElementById('form').style.display="block";
	document.getElementById('overlay').style.display="none";
	document.getElementById('nowLoadingWrapper').style.display="none";
}
function showNowPrinting(){
    document.getElementById('overlay').style.display="block";
    document.getElementById('nowPrintingWrapper').style.display="table";
}
function hideNowPrinting(){
    document.getElementById('overlay').style.opacity= 0.0;
    document.getElementById('overlay').style.transition= "all 0.3s";
    intimer = setTimeout(function (){
        document.getElementById('overlay').style.display="none";
    document.getElementById('overlay').style.opacity= 1;
        clearTimeout(intimer);
    }, 300);
    document.getElementById('nowPrintingWrapper').style.display="none";
}
window.onload = function() {
	nowLoading();
}
// -->
</script>
<noscript>
    Your browser does not support JavaScript!
</noscript>
</head>
<body>

	<div id="overlay">
		<div id="nowPrintingWrapper">
			<section id="nowPrinting">
				<h1>Now Printing</h1>
				<p><img src="images/icon_loading.gif" /></p>
			</section>
		</div>
		<div id="nowLoadingWrapper">
			<section id="nowLoading">
				<h1>Now Loading</h1>
				<p><img src="images/icon_loading.gif" /></p>
			</section>
		</div>
	</div>

<header id="global-header">
<h1><a href="A001.html"><img src="images/logo_01.png" alt="HOME" width="108" height="61"></a></h1>
<div id="sub-logo"><a href="http://www.star-m.jp/" target="_blank"><img src="images/logo_02.png" alt="" width="120" height="13"></a></div>
</header>

<section class="btmMg20">
	<h2 class="h2-tit-01 btmMg20">API : Receipt</h2>
</section>

    <form onsubmit='return false;' id="form">
		<div class="container">
				<dl>
					<dt>Paper Width</dt>
                    <dd>:
 						<select id='paperWidth'>
							<option value='inch2' selected='selected'>2 Inch</option>
							<option value='inch3'>3 Inch</option>
							<option value='inch4'>4 Inch</option>
						</select>
					</dd>
				</dl>
                <dl>
                    <dt>Encoding</dt>
                    <dd>:
                        <select id='encoding'>
                            <option value='shift_jis' selected='selected'>Shift-JIS</option>
                            <option value='utf8'>UTF-8</option>
                        </select>
                    </dd>
                </dl>
            <hr>
            <footer>
                <dl>
					<dt>URL</dt>
					<dd>:
                    <input id="url" type="text" value="http://localhost:8001/StarWebPRNT/SendMessage" /></dd>
				</dl>
                <d1>
                    <dt>Paper Type</dt>
                    <dd>:
                        <select id='papertype'>
                            <option value='' selected='selected'>-</option>
                            <option value='normal'>Normal</option>
                            <option value='black_mark'>Black Mark</option>
                            <option value='black_mark_and_detect_at_power_on'>Black Mark and Detect at Power On</option>
                        </select>
                    </dd>
                </dl>

				<input id="sendBtnKanji" type="button" value="PrintFabSpace" onclick="PrintFabSpace()" />
			</footer>
		</div>
	</form>

    <div class="to_top">
    </div>
<footer id="global-footer" class="clearfix">
    <a href="Sample/Styled_CanvasBarcode.html">CanvasBarcode</a><br>
	<a href="https://www.star-m.jp/starwebprnt-oml.html" target="_blank"><img src="images/footer-logo.png" width="123" alt="" id="footer-logo"></a>
    <img src="images/footer-image.png"height="54" alt=""/>
</footer>

</body>
</html>
